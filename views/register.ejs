<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>index</title>
	<!-- Bootstrap -->
	<link href="css/bootstrap.css" rel="stylesheet">
	<link href="css/bootstrap-fileinput.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

</head>

<body>
	<div class="login-header">
		<div class="container container-sm clearfix">
			<div class="pull-left login-logo"><a href="/index"><img src="images/logo.png"></a></div>
			<div class="login-txt pull-left text-right"><span>欢迎注册</span><br>Reg</div>
		</div>
	</div>
	<div class="register-back">
		<div class="container container-sm">
			<div class="register-box">
				<div class="register-tt">个人信息</div>
				<div class="relative">
					<input type="text" data-target="userName" class=" form-control register-input" placeholder="用户名：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="password" data-target="password" class=" form-control register-input" placeholder="密码：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="name" class=" form-control register-input" placeholder="姓名：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="sex" class=" form-control register-input" placeholder="性别：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="phone" class=" form-control register-input" placeholder="手机：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="email" class=" form-control register-input" placeholder="Email：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="education" class=" form-control register-input" placeholder="学历：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="major" class=" form-control register-input" placeholder="专业：" />
					<span>*</span>
				</div>
				<div class="register-tt">公司信息</div>
				<div class="relative">
					<input type="text" data-target="companyName" class=" form-control register-input" placeholder="公司名称：" />
					<span>*</span>
				</div>
				<div class="relative relative-sm">
					<!-- <select class="form-control register-input register-select">
						<option>请选择省/直辖市</option>
						<option>请选择省/直辖市</option>
						<option>请选择省/直辖市</option>
					</select> -->
					<input type="text" data-target="companyAddress" class=" form-control register-input" placeholder="公司地址：" />
					<span>*</span>
					<span class="xs">*</span>
				</div>
				<div class="form-group">
					<div class="fileinput fileinput-new" data-provides="fileinput" id="exampleInputUpload">
						<span class="btn btn-primary btn-file">
							<span class="fileinput-new">上传营业执照</span>
							<span class="fileinput-exists">换一张</span>
							<input type="file" name="pic1" class="photo" id="picID" accept="image/gif,image/jpeg,image/x-png" />
						</span>
						<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
						<div class="clearfix"></div>
					</div>
					<span class="r">*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="department" class=" form-control register-input" placeholder="部门：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="position" class=" form-control register-input" placeholder="职位：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="tel" class=" form-control register-input" placeholder="固定电话：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="fax" class=" form-control register-input" placeholder="传真：" />
					<span>*</span>
				</div>
				<div class="relative">
					<input type="text" data-target="website" class=" form-control register-input" placeholder="官网：" />
					<span>*</span>
				</div>
				<div>
					<div class="checkbox">
						<input type="checkbox"> 点击阅读注册协议
					</div>
				</div>
				<button id="uploadSubmit" type="submit" class="btn btn-register">同意注册协议，立即注册</button>
			</div>
		</div>
	</div>
	<div class="login-footer">
		<div class="container">
			<div class="login-list text-center clearfix">
				<a href="/about">关于我们</a><span>|</span>
				<a href="/contact">联系我们</a><span>|</span>
				<a href="/productlist">产品系列</a><span>|</span>
				<a href="/case">解决方案</a><span>|</span>
				<a href="/support">技术支持</a><span>|</span>
				<a href="/video">德马培训</a><span>|</span>
				<a href="/download">资料下载</a><span>|</span>
				<a href="/integrator">查看集成伙伴</a><span>|</span>
				<a href="">我的购物车</a>
			</div>
			<div class="login-beian text-center">2011 版权所有输送机易购　沪ICP备11029162号　电话：021-64856600　地址：上海市徐汇区虹漕路461号7楼</div>
		</div>
	</div>
</body>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/bootstrap-fileinput.js"></script>
<script type="text/javascript">
	$(".checkbox").click(function () {
		$(this).toggleClass("active");

	})
	$(function () {
		//比较简洁，细节可自行完善
		$('#uploadSubmit').click(function () {
			// var data = new FormData($('#uploadForm')[0]);
			var ddom = jQuery('.register-input')
			var data = new FormData();
			if (document.getElementsByClassName('photo')[0].files[0]) {
				data.append("businessLicense", document.getElementsByClassName('photo')[0].files[0])
			}
			for (var i = 0; i < ddom.length; i++) {
				if (ddom[i] && ddom[i].value && ddom[i].value.length > 0) {
					data.append(ddom[i].getAttribute('data-target'), ddom[i].value)
				}
			}
			$.ajax({
				url: '/api/register',
				type: 'POST',
				data: data,
				async: false,
				cache: false,
				contentType: false,
				processData: false,
				success: function (data) {
					console.log(data);
					if (data.status && data.status === 'success') {
						location.href = '/account'
					} else if (data.msg) {
						alert(data.msg)
						// console.log(data.message);
					}
				},
				error: function (data) {
					console.log(data.status);
				}
			});
		});

	})
</script>

</html>